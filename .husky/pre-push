#!/usr/bin/env sh

# è·å–ç›®æ ‡åˆ†æ”¯åç§°
branch=$(git symbolic-ref --short HEAD)

# æ£€æŸ¥æ˜¯å¦ push åˆ° master åˆ†æ”¯
if [ "$branch" = "master" ]; then
  echo "ğŸ” æ£€æµ‹åˆ° push åˆ° master åˆ†æ”¯ï¼Œæ£€æŸ¥ version æ˜¯å¦å·²æ›´æ–°..."
  node scripts/check-version.js
  
  exit_code=$?
  if [ $exit_code -ne 0 ]; then
    echo "âŒ Version æ£€æŸ¥å¤±è´¥"
    exit 1
  fi
  
  echo "âœ… Version æ£€æŸ¥é€šè¿‡"
fi

# è¿è¡Œ lint-stagedï¼ˆå¦‚æœæœ‰æ–‡ä»¶éœ€è¦ lintï¼‰
npm run lint-staged || true

